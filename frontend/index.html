<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BOOMBOXSWAP - Trading Bot Automatisé</title>

    <!-- CDN Dependencies -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="assets/css/notifications.css" rel="stylesheet">

    <style>
        /* CSS INTÉGRÉ DIRECTEMENT */
        :root {
            --primary-bg: #1a2332;
            --secondary-bg: #2a3342;
            --accent-blue: #4a90e2;
            --accent-green: #00ff88;
            --accent-red: #ff4757;
            --text-primary: #ffffff;
            --text-secondary: #b8c5d6;
            --border-color: #3a4a5a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            background: var(--primary-bg);
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .glass-header {
            display: flex !important;
            align-items: center !important;
            background: rgba(42, 51, 66, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(74, 144, 226, 0.3);
            padding: 0.3rem 1rem;
            position: relative;
            min-height: 64px;
            height: auto;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            height: 100%;
            width: 100%;
            padding: 0 20px !important;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 0.08em;
            font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
            font-weight: 800;
            font-size: 2.1rem;
            letter-spacing: 0.13em;
            user-select: none;
            background: none;
            margin-left: 0.2em;
            height: auto;
            line-height: 1.1;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: var(--accent-blue);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            box-shadow: 0 0 10px rgba(74, 144, 226, 0.5);
        }

        .logo-text {
            display: flex;
            flex-direction: column;
        }

        .logo-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--accent-blue);
            text-shadow: 0 0 10px rgba(74, 144, 226, 0.5);
        }

        .logo-subtitle {
            font-size: 0.6rem;
            color: var(--text-secondary);
            font-weight: 400;
        }

        .metamask-btn-disconnected {
            background: var(--accent-red);
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-family: inherit;
            transition: all 0.3s ease;
            font-size: 0.75rem;
            transform: translateY(0.3rem);
        }

        .metamask-btn-disconnected:hover {
            background: #ff3742;
            transform: translateY(-2px);
        }

        .dot-navigation {
            display: flex;
            justify-content: center;
            gap: 0.3rem;
            margin-top: 0.3rem;
            transform: translateY(-0.3rem);
            position: relative;
            z-index: 2;
        }

        .nav-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-dot.active {
            background: var(--accent-blue);
            box-shadow: 0 0 10px var(--accent-blue);
        }

        /* Sélecteur de chain personnalisé */
        .chain-selector-container {
            position: absolute;
            top: 0.5rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 3;
        }

        .custom-chain-selector {
            position: relative;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
            z-index: 1;
        }

        .custom-chain-selector:hover {
            border-color: var(--accent-blue);
            box-shadow: 0 0 5px rgba(74, 144, 226, 0.3);
        }

        .selected-chain {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.3rem 0.6rem;
            color: var(--text-primary);
            font-size: 0.8rem;
        }

        .chain-logo {
            width: 20px;
            height: 20px;
            object-fit: contain;
            border-radius: 3px;
        }

        .chain-name {
            font-weight: 500;
        }

        .chain-options {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            /* display: none;  // SUPPRIMÉ : affichage désormais contrôlé uniquement par le JS */
            z-index: 99999;
        }

        /* .custom-chain-selector.open .chain-options {
            display: block;
        } // SUPPRIMÉ : menu déplacé sous <body> */

        .chain-option {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            padding: 0.3rem 0.6rem;
            color: var(--text-primary);
            font-size: 0.8rem;
            transition: background-color 0.2s ease;
        }

        .chain-option:hover {
            background: rgba(74, 144, 226, 0.1);
        }

        .chain-option.selected {
            background: rgba(74, 144, 226, 0.2);
            color: var(--accent-blue);
        }

        /* Main Content */
        .main-content {
            padding: 0.5rem 0.5rem 0.2rem 0.5rem;
            max-width: 1400px;
            margin: 0 auto;
            height: calc(100vh - 80px);
            overflow: visible;
        }

        .smart-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            height: 100%;
            align-items: stretch;
        }

        /* Smart Cards */
        .smart-card {
            background: rgba(42, 51, 66, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 144, 226, 0.3);
            border-radius: 12px;
            padding: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: visible;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        /* Cards du haut - hauteur ajustée */
        .smart-card.top-row {
            min-height: 180px;
        }

        /* Card du prix avec background normal */
        .smart-card.top-row:nth-child(3) {
            background: rgba(42, 51, 66, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(74, 144, 226, 0.3);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .smart-card.top-row:nth-child(2) {
            z-index: 20;
        }

        /* Cards du bas - plus grandes en hauteur */
        .smart-card.bottom-row {
            min-height: 250px;
            overflow: visible;
        }

        /* Ajustements spécifiques pour les cards du bas */
        .bottom-row .deposit-input-section {
            margin-bottom: 1.5rem;
            overflow: visible;
        }

        .bottom-row .estimation-section {
            flex: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            overflow: visible;
            min-height: 0;
            margin-top: 0;
            padding: 0;
        }

        .bottom-row .estimation-grid {
            display: flex;
            flex-direction: column;
            gap: 0.05rem;
            justify-content: flex-start;
            flex: 0;
            margin-top: 0;
        }

        .bottom-row .music-container {
            flex: 0;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 1rem;
            padding-top: 0;
            margin-top: 2rem;
        }

        .music-btn-primary {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: #2ecc71;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 2.8rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: -2.5rem;
        }

        .music-btn-primary:hover {
            transform: scale(1.15) translateY(-3px);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.2);
            filter: brightness(1.1);
        }

        .music-controls {
            display: flex;
            gap: 2rem;
            align-items: center;
            margin-top: 1rem;
        }

        .music-btn-nav {
            width: 85px;
            height: 85px;
            border-radius: 50%;
            background: var(--accent-blue);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 2rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-btn-nav:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.2);
            filter: brightness(1.1);
        }

        .music-btn-secondary {
            width: 85px;
            height: 85px;
            border-radius: 50%;
            background: var(--accent-red);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 2rem;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-btn-secondary:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 59, 48, 0.2);
            filter: brightness(1.1);
        }

        .bottom-row .swap-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .bottom-row .swap-triangle {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 0.6rem;
        }

        .smart-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border-color: rgba(74, 144, 226, 0.3);
        }

        /* Suppression de la lueur pour les cards du haut seulement */
        .smart-card.top-row:hover {
            transform: none;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border-color: rgba(74, 144, 226, 0.3);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
            flex-shrink: 0;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 600;
            color: white;
        }

        .card-icon {
            color: var(--accent-blue);
            font-size: 16px;
        }

        /* Balance Card */
        .balance-content {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            flex: 1;
            overflow: hidden;
        }

        .balance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.25rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .balance-item:last-child {
            border-bottom: none;
        }

        .balance-label {
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .crypto-logo {
            color: var(--accent-blue);
            font-size: 0.9rem;
        }

        .token-logo {
            width: 16px;
            height: 16px;
            object-fit: contain;
        }

        .balance-value {
            font-weight: 600;
            color: var(--accent-green);
            font-size: 0.9rem;
        }

        .balance-divider {
            height: 1px;
            background: var(--border-color);
            margin: 0.4rem 0;
        }

        .balance-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.4rem 0;
            margin-top: 0.3rem;
        }

        .total-label {
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-weight: 500;
        }

        .total-value {
            font-weight: 600;
            color: var(--accent-blue);
            font-size: 0.9rem;
        }

        /* Earnings Card */
        .earnings-content {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            flex: 1;
            overflow: hidden;
        }

        .earnings-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.4rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .earnings-item:last-child {
            border-bottom: none;
        }

        .earnings-label {
            color: var(--text-secondary);
            font-size: 0.65rem;
            font-weight: 500;
        }

        .earnings-value {
            font-weight: 600;
            color: var(--accent-green);
            font-size: 0.65rem;
        }

        .earnings-total-item {
            padding: 0.08rem 0 !important;
            min-height: 1rem !important;
            border-top: 1px solid rgba(74, 144, 226, 0.2);
            border-bottom: 1px solid rgba(74, 144, 226, 0.2);
            margin: 0.1rem 0;
        }

        .earnings-total-value {
            font-size: 0.85rem !important;
            font-weight: 700 !important;
            color: #2ecc71 !important;
        }

        .earnings-divider {
            height: 1px;
            background: var(--border-color);
            margin: 0.4rem 0;
        }

        .earnings-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.6rem 0;
            margin-top: 0.4rem;
        }

        /* Price Card */
        .price-content {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .price-main {
            font-size: 4.2rem;
            font-weight: 700;
            color: white;
            animation: pricePulse 3s infinite;
        }

        .price-indicator {
            width: 8px;
            height: 8px;
            background: #2ecc71;
            border-radius: 50%;
            animation: glow 2s infinite;
            transform: translateY(-28px);
        }

        @keyframes glow {
            0% {
                box-shadow: 0 0 10px rgba(46, 204, 113, 0.6);
            }
            50% {
                box-shadow: 0 0 15px rgba(46, 204, 113, 0.8);
            }
            100% {
                box-shadow: 0 0 10px rgba(46, 204, 113, 0.6);
            }
        }

        @keyframes pricePulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        /* Deposit Card */
        .deposit-input-section {
            margin-bottom: 1.5rem;
            margin-top: 2rem;
        }

        .input-container {
            position: relative;
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }

        .deposit-input {
            width: 100%;
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 0.6rem;
            color: var(--text-primary);
            font-size: 0.9rem;
            font-family: inherit;
            transition: all 0.3s ease;
            padding-right: 2.5rem;
        }

        .deposit-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 5px rgba(74, 144, 226, 0.3);
        }

        .input-suffix {
            position: absolute;
            right: 0.6rem;
            color: var(--text-secondary);
            font-weight: 500;
            pointer-events: none;
            font-size: 0.8rem;
        }

        .percentage-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.4rem;
            margin-bottom: 0.75rem;
        }

        .percentage-btn {
            padding: 0.4rem;
            background: transparent;
            border: 1px solid var(--accent-blue);
            border-radius: 5px;
            color: var(--accent-blue);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.7rem;
            font-weight: 500;
            font-family: inherit;
        }

        .percentage-btn:hover {
            background: var(--accent-blue);
            color: white;
            transform: translateY(-1px);
        }

        .estimation-section {
            padding: 0.5rem;
            flex: 0;
            overflow: visible;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .estimation-title {
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 0.8rem;
            text-align: center;
        }

        .estimation-grid {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            overflow: visible;
        }

        .estimation-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0;
            margin-bottom: 1.2rem;
            overflow: visible;
        }

        .estimation-item:last-child {
            margin-bottom: 0;
        }

        .estimation-label {
            color: var(--text-secondary);
            font-size: 0.75rem;
            font-weight: 500;
        }

        .estimation-value {
            font-weight: 600;
            color: var(--accent-blue);
            font-size: 0.8rem;
        }

        /* Swap Card */
        .swap-content {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            flex: 1;
            overflow: hidden;
        }

        .swap-triangle {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            margin-bottom: 0.75rem;
            flex: 1;
            justify-content: center;
        }

        .swap-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            padding: 0.4rem;
            background: var(--primary-bg);
            border-radius: 5px;
            border: 1px solid var(--border-color);
        }

        .swap-from, .swap-to {
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 0.8rem;
        }

        .swap-arrow-icon {
            color: var(--accent-blue);
            font-weight: bold;
            font-size: 1rem;
        }

        .swap-slippage {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 0.4rem;
            border-top: 1px solid var(--border-color);
        }

        .slippage-label {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .slippage-value {
            color: var(--accent-green);
            font-weight: 600;
            font-size: 0.8rem;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .smart-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 0.4rem;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 0.25rem;
                height: calc(100vh - 70px);
            }

            .smart-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.4rem;
            }

            .header-container {
                flex-direction: column;
                gap: 0.5rem;
                text-align: center;
            }

            .percentage-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .music-controls {
                flex-wrap: wrap;
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: 0.1rem;
                height: calc(100vh - 60px);
            }

            .smart-grid {
                grid-template-columns: 1fr;
                gap: 0.3rem;
            }

            .smart-card {
                padding: 0.75rem;
            }

            .card-title {
                font-size: 0.9rem;
            }

            .price-main {
                font-size: 1.5rem;
            }
        }

        /* Ajustements spécifiques pour les cards du haut */
        .top-row .balance-content,
        .top-row .earnings-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            gap: 0.05rem;
            padding: 0.05rem 0;
            overflow: hidden;
        }

        .top-row .price-content {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            margin-top: -0.5rem;
            gap: 0.5rem;
        }

        .top-row .balance-item {
            padding: 0.08rem 0;
            min-height: 1rem;
        }

        .top-row .earnings-item {
            padding: 0.04rem 0;
            min-height: 0.8rem;
            font-size: 0.65rem;
        }

        .top-row .earnings-total-item {
            padding: 0.06rem 0 !important;
            min-height: 1.1rem !important;
            font-size: 0.7rem;
        }

        .top-row .balance-divider,
        .top-row .earnings-divider {
            margin: 0.1rem 0;
        }

        .top-row .balance-total,
        .top-row .earnings-total {
            margin-top: 0.1rem;
            padding: 0.3rem;
        }

        .bottom-row .card-header {
            margin-bottom: 0;
        }

        /* === DÉSACTIVÉ : styles modale wallet pour éviter conflit avec CSS global ===
        .wallet-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }
        .wallet-modal-content {
            background: var(--primary-bg);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            max-width: 400px;
            width: 90%;
        }
        #wallet-qrcode {
            background: var(--secondary-bg);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 250px;
            margin: 0 auto;
        }
        #wallet-qrcode img {
            max-width: 100%;
            height: auto;
        }
        */

        .close-btn {
            background: var(--accent-red);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(255, 71, 87, 0.3);
        }

        .close-btn:hover {
            background: #ff2a37;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 71, 87, 0.4);
        }
    </style>
    <style>
    .wallet-header-btn {
        padding: 0.4rem 0.8rem;
        font-size: 0.75rem;
        border-radius: 5px;
        font-weight: 600;
        font-family: inherit;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-block;
        white-space: nowrap;
    }
    .wallet-header-btn.connected {
        background: #28c76f;
        color: #fff;
    }
    .wallet-header-btn.disconnected {
        background: #ff4757;
        color: #fff;
    }
    .wallet-header-btn:hover {
        filter: brightness(1.1);
    }
    </style>
    <style>
/* Fix seulement le QR code WalletConnect - pas la modal de choix */
wcm-qr-code svg {
    background: white !important;
    border-radius: 8px !important;
    padding: 10px !important;
}

/* Masquer seulement les textes qui gênent le scan */
wcm-legal-footer {
    display: none !important;
}
</style>
<style>
/* Fix WalletConnect Modal - Supprimer fond bleu + adapter taille */
wcm-modal-header,
wcm-modal-header > *,
wcm-header,
wcm-connect-button,
wcm-modal-title {
    background: transparent !important;
    background-color: transparent !important;
    background-image: none !important;
}

wcm-modal-header {
    background: #1a2332 !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
    padding: 16px 20px !important;
}

wcm-modal-header h2,
wcm-modal-title,
wcm-header-title {
    color: #ffffff !important;
    background: transparent !important;
    font-family: 'Inter', sans-serif !important;
    font-weight: 600 !important;
    font-size: 18px !important;
}

wcm-modal,
wcm-modal-container {
    max-height: 85vh !important;
    height: auto !important;
    max-width: 420px !important;
    width: 90vw !important;
}

wcm-modal-content {
    max-height: calc(85vh - 120px) !important;
    overflow-y: auto !important;
    padding: 20px !important;
}

wcm-qr-code {
    margin: 10px auto !important;
    padding: 15px !important;
    background: white !important;
    border-radius: 12px !important;
    display: flex !important;
    justify-content: center !important;
    align-items: center !important;
}

wcm-qr-code canvas,
wcm-qr-code svg {
    width: min(240px, 60vw) !important;
    height: min(240px, 60vw) !important;
    max-width: 240px !important;
    max-height: 240px !important;
}

wcm-desktop-wallet-selection,
wcm-mobile-wallet-selection {
    padding: 15px 0 !important;
}

wcm-wallet-button {
    width: 70px !important;
    height: 70px !important;
    margin: 5px !important;
}

wcm-qr-code-text,
wcm-instruction-text {
    font-size: 13px !important;
    line-height: 1.4 !important;
    margin: 8px 0 !important;
    color: #e5e7eb !important;
}

wcm-tab-button {
    padding: 8px 16px !important;
    font-size: 14px !important;
}

wcm-legal-footer,
wcm-legal-notice,
wcm-modal-footer {
    display: none !important;
}

wcm-modal-overlay {
    background: rgba(0, 0, 0, 0.85) !important;
}

wcm-modal-container {
    background: #1a2332 !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    border-radius: 16px !important;
}

wcm-connect-wallet-button,
wcm-wallet-explorer,
wcm-all-wallets-list {
    background: transparent !important;
}

wcm-modal-close-button {
    background: rgba(255, 255, 255, 0.1) !important;
    border-radius: 50% !important;
    color: #ffffff !important;
    width: 32px !important;
    height: 32px !important;
}

@media (max-height: 700px) {
    wcm-modal-container {
        max-height: 95vh !important;
    }
    wcm-modal-content {
        max-height: calc(95vh - 100px) !important;
        padding: 15px !important;
    }
    wcm-qr-code canvas,
    wcm-qr-code svg {
        width: min(200px, 50vw) !important;
        height: min(200px, 50vw) !important;
    }
    wcm-wallet-button {
        width: 60px !important;
        height: 60px !important;
    }
}

@media (max-width: 480px) {
    wcm-modal-container {
        width: 95vw !important;
        max-width: 350px !important;
    }
    wcm-qr-code {
        padding: 10px !important;
    }
    wcm-qr-code canvas,
    wcm-qr-code svg {
        width: min(180px, 45vw) !important;
        height: min(180px, 45vw) !important;
    }
}

wcm-connecting-header::after {
    content: "📱 Scannez avec Trust Wallet, MetaMask Mobile ou autre wallet" !important;
    display: block !important;
    color: #3B82F6 !important;
    font-size: 13px !important;
    margin-top: 8px !important;
    text-align: center !important;
    font-weight: normal !important;
}
wcm-connecting-header {
    font-size: 0 !important;
}
</style>
<style>
/* --- Fix WalletConnect Modal: taille et adaptabilité écran --- */
wcm-modal,
wcm-modal-container {
    max-width: 380px !important;
    width: 95vw !important;
    max-height: 90vh !important;
    height: auto !important;
    min-width: 0 !important;
    min-height: 0 !important;
    box-sizing: border-box !important;
}

wcm-modal-content {
    max-height: 70vh !important;
    overflow-y: auto !important;
    padding: 12px !important;
}

wcm-qr-code,
wcm-qr-code canvas,
wcm-qr-code svg {
    width: 180px !important;
    height: 180px !important;
    max-width: 180px !important;
    max-height: 180px !important;
    margin: 0 auto !important;
    display: block !important;
}
</style>
<style>
.logo-boomboxswap {
    display: flex !important;
    align-items: center !important;
    font-family: 'Inter', sans-serif !important;
    font-weight: 900 !important;
    font-size: 28px !important;
    letter-spacing: 0px !important;
    margin-right: 20px !important;
    white-space: nowrap !important;
    flex-shrink: 1 !important;
}
.wallet-btn {
    display: flex;
    align-items: center;
    justify-content: center;
}
.logo-boomboxswap .boom { color: #10b981 !important; }
.logo-boomboxswap .box { color: #ffffff !important; }
.logo-boomboxswap .swap { color: #3b82f6 !important; }
</style>
<style>
    .chain-navigation-container {
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        justify-content: center !important;
        gap: 6px !important;
        flex: 0 0 auto !important;
        flex-shrink: 0 !important;
        width: auto !important;
    }
    .chain-navigation-container > .custom-chain-selector {
        order: 1 !important;
        margin-bottom: 0 !important;
        width: auto !important;
    }
    .chain-navigation-container > .navigation-points {
        order: 2 !important;
        display: flex !important;
        flex-direction: row !important;
        gap: 8px !important;
        width: auto !important;
    }
    .nav-point {
        width: 8px !important;
        height: 8px !important;
        border-radius: 50% !important;
        background: #94a3b8 !important;
        cursor: pointer !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
    }
    .nav-point.active {
        background: #10b981 !important;
    }
</style>
<style>
.header-container {
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    max-width: 1400px;
    margin: 0 auto;
    height: 100%;
    width: 100%;
    padding: 0 20px;
}
.header-side {
    flex: 1 1 0;
    min-width: 0;
    display: flex;
    align-items: center;
}
.header-left {
    justify-content: flex-start;
}
.header-right {
    justify-content: flex-end;
}
.header-center {
    flex: 0 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 10000;
}
.custom-chain-selector {
    position: relative !important;
    z-index: 10 !important;
}
.chain-options {
    position: absolute !important;
    z-index: 99999 !important;
    left: 0 !important;
    right: 0 !important;
    top: 100% !important;
    margin-top: 4px !important;
    min-width: 160px !important;
}
.navigation-points {
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 8px !important;
    margin-top: 10px !important;
}
</style>
<style>
.chain-options {
    background: #1a2332 !important;
    border: 2px solid #4a90e2 !important;
    color: #fff !important;
    box-shadow: 0 4px 16px rgba(0,0,0,0.4) !important;
}
</style>
<style>
.glass-header,
.header-container,
.header-center {
    position: static !important;
    z-index: auto !important;
}
.custom-chain-selector {
    position: relative !important;
    z-index: 10 !important;
}
.chain-options {
    position: absolute !important;
    z-index: 99999 !important;
    left: 0 !important;
    right: 0 !important;
    top: 100% !important;
    margin-top: 4px !important;
    min-width: 160px !important;
    width: auto !important;
    box-sizing: border-box !important;
}
.smart-card, .main-content, .smart-grid {
    z-index: auto !important;
    transform: none !important;
    overflow: visible !important;
}
</style>
</head>
<body>

    <!-- ========== HEADER ========== -->
    <header class="glass-header">
        <div class="header-container">
            <div class="header-side header-left">
                <div class="logo-boomboxswap">
                    <span class="boom">BOOM</span><span class="box">BOX</span><span class="swap">SWAP</span>
                </div>
            </div>
            <div class="header-center">
                <div class="custom-chain-selector" id="chain-selector">
                    <div class="selected-chain" id="selected-chain">
                        <img src="assets/images/chains/BSC-logo.svg" alt="BSC" class="chain-logo">
                        <span class="chain-name">BSC</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <!-- MENU DROPDOWN DÉPLACÉ SOUS <body> POUR ÉVITER LES PROBLÈMES DE STACKING CONTEXT -->
                </div>
                <div class="navigation-points">
                    <span class="nav-point active"></span>
                    <span class="nav-point"></span>
                </div>
            </div>
            <div class="header-side header-right">
                <div class="metamask-section">
                    <button id="wallet-btn" class="wallet-header-btn wallet-btn disconnected">
                        <span id="wallet-btn-text">Connecter Wallet</span>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <!-- MENU DROPDOWN DÉPLACÉ POUR ÉVITER STACKING CONTEXT -->
    <div class="chain-options" id="chain-options">
        <div class="chain-option" data-value="bsc">
            <img src="assets/images/chains/BSC-logo.svg" alt="BSC" class="chain-logo">
            <span class="chain-name">BSC</span>
        </div>
        <div class="chain-option" data-value="arb">
            <img src="assets/images/chains/arbitrum-arb-logo.svg" alt="ARB" class="chain-logo">
            <span class="chain-name">ARB</span>
        </div>
        <div class="chain-option" data-value="base">
            <img src="assets/images/chains/Base logo.png" alt="BASE" class="chain-logo">
            <span class="chain-name">BASE</span>
        </div>
    </div>

    <div id="positions-alert" style="display:none;"></div>

    <!-- ========== DASHBOARD TAB ========== -->
    <main id="dashboard-content" class="main-content">
        <div class="smart-grid">

            <!-- Card 1: Portefeuille -->
            <div class="smart-card top-row" id="card-portfolio">
                <div class="card-header">
                    <h3 class="card-title">Portefeuille</h3>
                    <i class="fas fa-wallet card-icon"></i>
                </div>
                <div class="balance-content" id="portfolio-content">
                    <div id="wallet-balances">
                        <div class="balance-item">
                            <span class="balance-label">
                                <img src="assets/images/tokens/bnb.svg" alt="BNB" class="token-logo">
                                BNB
                            </span>
                            <span class="balance-value" id="balance-bnb"></span>
                        </div>
                        <div class="balance-item">
                            <span class="balance-label">
                                <img src="assets/images/tokens/usdt.svg" alt="USDT" class="token-logo">
                                USDT
                            </span>
                            <span class="balance-value" id="balance-usdt"></span>
                        </div>
                        <div class="balance-item">
                            <span class="balance-label">
                                <img src="assets/images/tokens/cake.svg" alt="CAKE" class="token-logo">
                                CAKE
                            </span>
                            <span class="balance-value" id="balance-cake"></span>
                        </div>
                        <div class="balance-divider"></div>
                        <div class="balance-total">
                            <span class="total-label">Valeur Totale</span>
                            <span class="total-value" id="total-value"></span>
                        </div>
                        <!-- Ajout debug : compteur de positions pour updatePositionsCard -->
                        <!-- SUPPRIMÉ: <div class="positions-debug"><span id="positions-count"></span></div> -->
                    </div>
                </div>
            </div>

            <!-- Card 2: Rendements -->
            <div class="smart-card top-row">
                <div class="card-header">
                    <h3 class="card-title">Rendements</h3>
                    <i class="fas fa-coins card-icon"></i>
                </div>
                <div class="earnings-content">
                    <div class="earnings-item">
                        <span class="earnings-label">Frais Générés</span>
                        <span class="earnings-value" id="fees-generated">$2.45 (BNB+USDT)</span>
                    </div>
                    <div class="earnings-item">
                        <span class="earnings-label">Rewards CAKE</span>
                        <span class="earnings-value" id="cake-rewards">$1.23</span>
                    </div>
                    <div class="earnings-item earnings-total-item">
                        <span class="earnings-label">Total Gains</span>
                        <span class="earnings-value earnings-total-value" id="total-gains">$3.68</span>
                    </div>
                    <div class="earnings-item">
                        <span class="earnings-label">Rebalancing</span>
                        <span class="earnings-value" id="rebalancing-count">3 fois</span>
                    </div>
                    <div class="earnings-item">
                        <span class="earnings-label">Autocompound</span>
                        <span class="earnings-value" id="autocompound-count">12 fois</span>
                    </div>
                    <div class="earnings-item">
                        <span class="earnings-label">Break Even</span>
                        <span class="earnings-value" id="break-even">Atteint</span>
                    </div>
                </div>
            </div>

            <!-- Card 3: BNB/USDT -->
            <div class="smart-card top-row">
                <div class="card-header">
                    <h3 class="card-title">BNB/USDT</h3>
                    <i class="fas fa-chart-area card-icon"></i>
                </div>
                <div class="price-content">
                    <div id="bnbPrice" class="price-main">$0.00</div>
                    <div class="price-indicator"></div>
                </div>
            </div>

            <!-- Card 4: Dépôt BNB -->
            <div class="smart-card bottom-row">
                <div class="card-header">
                    <h3 class="card-title">Dépôt BNB</h3>
                    <i class="fas fa-building card-icon"></i>
                </div>
                <div class="deposit-input-section">
                    <div class="input-container">
                        <input type="text" class="deposit-input" value="0.0000" placeholder="0.0000">
                        <span class="input-suffix">BNB</span>
                    </div>
                    <div class="percentage-grid">
                        <button class="percentage-btn">25%</button>
                        <button class="percentage-btn">50%</button>
                        <button class="percentage-btn">75%</button>
                        <button class="percentage-btn">MAX</button>
                    </div>
                </div>
                <div class="estimation-section">
                    <div class="estimation-title">Estimation après création LP:</div>
                    <div class="estimation-grid">
                        <div class="estimation-item">
                            <span class="estimation-label">BNB:</span>
                            <span class="estimation-value">0.0000</span>
                        </div>
                        <div class="estimation-item">
                            <span class="estimation-label">USDT:</span>
                            <span class="estimation-value">0.00</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Card 5: Actions -->
            <div class="smart-card bottom-row">
                <div class="card-header">
                    <h3 class="card-title">Actions</h3>
                    <i class="fas fa-music card-icon"></i>
                </div>
                <div class="music-container">
                    <button class="music-btn-primary" onclick="toggleMusic()">
                        <i class="fas fa-play"></i>
                    </button>
                    <div class="music-controls">
                        <button class="music-btn-nav" onclick="previousTrack()">
                            <i class="fas fa-step-backward"></i>
                        </button>
                        <button class="music-btn-secondary" onclick="stopMusic()">
                            <i class="fas fa-eject"></i>
                        </button>
                        <button class="music-btn-nav" onclick="nextTrack()">
                            <i class="fas fa-step-forward"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Card 6: Swap Intégré -->
            <div class="smart-card bottom-row">
                <div class="card-header">
                    <h3 class="card-title">Swap Intégré</h3>
                    <i class="fas fa-exchange-alt card-icon"></i>
                </div>
                <div class="swap-content">
                    <div class="swap-triangle">
                        <div class="swap-arrow">
                            <span class="swap-from">BNB</span>
                            <i class="fas fa-arrow-right swap-arrow-icon"></i>
                            <span class="swap-to">USDT</span>
                        </div>
                        <div class="swap-arrow">
                            <span class="swap-from">USDT</span>
                            <i class="fas fa-arrow-right swap-arrow-icon"></i>
                            <span class="swap-to">CAKE</span>
                        </div>
                        <div class="swap-arrow">
                            <span class="swap-from">CAKE</span>
                            <i class="fas fa-arrow-right swap-arrow-icon"></i>
                            <span class="swap-to">BNB</span>
                        </div>
                    </div>
                    <div class="swap-slippage">
                        <span class="slippage-label">Slippage:</span>
                        <span class="slippage-value">0.5%</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ========== CONFIGURATION RANGE TAB ========== -->
    <main id="range-content" class="main-content" style="display: none;">
        <div class="range-config-container">
            <div class="range-input-section">
                <label class="range-label">Écart souhaité (en USD)</label>
                <div class="range-input-container">
                    <input type="number" placeholder="15.5" class="range-input" id="custom-range-input">
                    <span class="range-suffix">$</span>
                </div>
            </div>

            <div class="preset-buttons-section">
                <label class="preset-label">Ou choisir un écart prédéfini:</label>
                <div class="preset-grid">
                    <button class="preset-btn" data-value="5">5$</button>
                    <button class="preset-btn" data-value="10">10$</button>
                    <button class="preset-btn" data-value="15">15$</button>
                    <button class="preset-btn" data-value="20">20$</button>
                    <button class="preset-btn" data-value="30">30$</button>
                    <button class="preset-btn" data-value="50">50$</button>
                </div>
            </div>

            <div class="range-preview-section">
                <h4 class="preview-title">Prévisualisation du Range:</h4>
                <div class="preview-grid">
                    <div class="preview-item">
                        <span class="preview-label">Prix actuel BNB:</span>
                        <span class="preview-value current-price" id="current-price-preview">$0.00</span>
                    </div>
                    <div class="preview-item">
                        <span class="preview-label">Prix inférieur:</span>
                        <span class="preview-value range-min" id="range-lower">$0.00</span>
                    </div>
                    <div class="preview-item">
                        <span class="preview-label">Prix supérieur:</span>
                        <span class="preview-value range-max" id="range-upper">$0.00</span>
                    </div>
                    <div class="preview-item">
                        <span class="preview-label">Écart total:</span>
                        <span class="preview-value range-spread" id="range-spread">$0.0</span>
                    </div>
                </div>
            </div>

            <div class="range-info-section">
                <h4 class="info-title">Informations:</h4>
                <div class="info-content">
                    <p>• Plus l'écart est petit, plus les frais sont élevés</p>
                    <p>• Plus l'écart est grand, plus la liquidité est stable</p>
                    <p>• Recommandé: 10-20$ pour un bon équilibre</p>
                </div>
            </div>

            <button class="save-range-btn" id="save-range-btn">
                <i class="fas fa-save"></i>
                Sauvegarder et Utiliser
            </button>
        </div>
    </main>

    <!-- ========== NOTIFICATIONS ========== -->
    <div id="notifications-container" class="notifications-container"></div>

    <!-- Modale de connexion wallet (gaming UX, logos officiels) -->
    <div id="walletModal" class="wallet-modal" style="display:none;">
      <div class="wallet-modal-content">
        <h2>Connexion Wallet</h2>
        <p>Choisissez votre méthode de connexion :</p>
        <div class="wallet-logos-options">
          <div class="wallet-option" id="connect-metamask">
            <img src="/assets/images/icons/metamask.svg" alt="MetaMask" class="wallet-logo" />
            <div class="wallet-label">MetaMask</div>
          </div>
          <div class="wallet-option" id="connect-walletconnect">
            <img src="/assets/images/icons/walletconnect.svg" alt="WalletConnect" class="wallet-logo" />
            <div class="wallet-label">WalletConnect</div>
          </div>
        </div>
        <div id="wallet-qrcode" style="display:none;"></div>
        <button id="close-wallet-modal" class="close-btn">Annuler</button>
      </div>
    </div>

    <!-- WalletConnect via ESM modules (plus moderne et fiable) -->
    <script src="https://unpkg.com/web3@latest/dist/web3.min.js"></script>
    <!-- WalletConnect v2 via ES modules -->
    <script type="module">
    import { EthereumProvider } from 'https://esm.sh/@walletconnect/ethereum-provider@2.13.0';
    window.WalletConnectEthereumProvider = EthereumProvider;
    console.log('✅ WalletConnect chargé via ESM:', !!EthereumProvider);
    window.dispatchEvent(new CustomEvent('walletconnect-loaded'));
    </script>
    <!-- Fallback si ESM ne marche pas -->
    <script>
    setTimeout(() => {
        if (!window.WalletConnectEthereumProvider) {
            console.warn('🔄 ESM failed, trying alternative approach...');
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/@web3modal/standalone@2.4.3/dist/index.js';
            script.onload = () => {
                console.log('✅ Web3Modal standalone chargé');
                window.WalletConnectEthereumProvider = {
                    init: async (config) => {
                        console.log('🔄 Init WalletConnect via Web3Modal...');
                        const modal = new window.Web3Modal.WalletConnectModal({
                            projectId: config.projectId,
                            chains: config.chains
                        });
                        return {
                            enable: async () => {
                                console.log('🚀 Opening WalletConnect modal...');
                                return await modal.openModal();
                            },
                            on: () => {},
                            removeListener: () => {},
                            disconnect: async () => {
                                await modal.closeModal();
                            }
                        };
                    }
                };
                window.dispatchEvent(new CustomEvent('walletconnect-loaded'));
            };
            document.head.appendChild(script);
        }
    }, 3000);
    </script>
    <script src="js/config/appkit-config.js"></script>
    <script src="assets/js/boombox-gaming.js"></script>
    <script src="js/core/api-client.js"></script>
    <script src="js/main.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const chainSelector = document.querySelector('.custom-chain-selector');
    const chainOptions = document.querySelector('.chain-options');
    const cards = document.querySelectorAll('.smart-card');

    // Log à chaque ouverture du menu
    if (chainSelector && chainOptions) {
        chainSelector.addEventListener('click', function() {
            setTimeout(function() {
                // This function is no longer needed as the debug styles are removed.
                // Keeping it for now in case it's re-introduced or if it was part of a larger debug suite.
                // console.log("=== DEBUG MENU SÉLECTEUR ===");
                // console.log("Menu .chain-options : left =", menuRect.left, "top =", menuRect.top, "width =", menuRect.width, "height =", menuRect.height);
                // console.log("Parent .custom-chain-selector : left =", parentRect.left, "top =", parentRect.top, "width =", parentRect.width, "height =", parentRect.height);
                // console.log("Menu z-index :", window.getComputedStyle(chainOptions).zIndex, "Position :", window.getComputedStyle(chainOptions).position);
                // console.log("Parent z-index :", window.getComputedStyle(chainSelector).zIndex, "Position :", window.getComputedStyle(chainSelector).position);
                // if (chainOptions.parentElement) {
                //     console.log("Parent direct de .chain-options :", chainOptions.parentElement.className || chainOptions.parentElement.id || chainOptions.parentElement.tagName);
                // }
                // cards.forEach((card, idx) => {
                //     const cardRect = card.getBoundingClientRect();
                //     console.log(`Card ${idx+1} (.smart-card) : left = ${cardRect.left}, top = ${cardRect.top}, width = ${cardRect.width}, height = ${cardRect.height}, z-index = ${window.getComputedStyle(card).zIndex}, position = ${window.getComputedStyle(card).position}`);
                // });
                // console.log("=== FIN DEBUG ===");
            }, 200); // attendre l'ouverture du menu
        });
    }
});
    </script>
    <script>
    window.addEventListener('load', function() {
        console.log('=== VÉRIFICATIONS BOOMSWAP WALLETCONNECT V2 EVENT ===');
        console.log('✅ Web3:', !!window.Web3);
        console.log('✅ WalletConnect EthereumProvider:', !!window.WalletConnectEthereumProvider);
        console.log('✅ WalletConnect Ready:', !!window.BOOMSWAP_WALLETCONNECT_READY);
        console.log('✅ Connect MetaMask function:', !!window.BOOMSWAP_CONNECT_METAMASK);
        console.log('✅ Connect WalletConnect function:', !!window.BOOMSWAP_CONNECT_WALLETCONNECT);
        console.log('📋 Project ID:', window.BOOMSWAP_PROJECT_ID);
        // Vérification différée pour WalletConnect
        setTimeout(() => {
            console.log('=== VÉRIFICATIONS DIFFÉRÉES (10s) ===');
            console.log('✅ WalletConnect EthereumProvider (10s):', !!window.WalletConnectEthereumProvider);
            console.log('✅ WalletConnect Ready (10s):', !!window.BOOMSWAP_WALLETCONNECT_READY);
            if (window.BOOMSWAP_CONNECT_METAMASK && window.BOOMSWAP_CONNECT_WALLETCONNECT) {
                if (window.BOOMSWAP_WALLETCONNECT_READY) {
                    console.log('🎉 BOOMSWAP WALLET V2 COMPLET!');
                    console.log('🦊 MetaMask + 📱 WalletConnect QR TOUS DISPONIBLES');
                } else {
                    console.log('🎉 BOOMSWAP WALLET V2 PARTIEL!');
                    console.log('🦊 MetaMask disponible, 📱 WalletConnect en cours...');
                }
                console.log('🌐 Réseaux: BSC, Arbitrum, Base');
            } else {
                console.error('❌ Problème initialisation wallet v2');
            }
        }, 10000);
    });
    </script>
</body>
</html>



